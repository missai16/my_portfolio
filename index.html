<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Personal Website</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Dark Mode Toggle -->
<button id="dark-mode-toggle" onclick="toggleDarkMode()">ðŸŒ™ Dark Mode</button>

<!-- Video Background -->
<video autoplay loop muted playsinline id="background-video">
  <source src="video.mp4" type="video/mp4">
</video>

<nav>
  <ul>
    <li><a href="#" onclick="toggleSection('home')">Home</a></li>
    <li><a href="#" onclick="toggleSection('about')">About</a></li>
    <li><a href="#" onclick="toggleSection('contact')">Contact</a></li>
    <li><a href="#" onclick="toggleSection('courses')">Courses</a></li>
  </ul>
</nav>

<main>
  <section id="home" class="content">
    <h1>Hello!</h1>
    <p>I am Aileen Mae Cat-awan.</p>
  </section>

  <section id="about" class="content">
    <h2>About Me</h2>
    <p>BSIT Student from USTP.</p>
    <img src="ms.aileen.jpg" alt="About Me">
  </section>

  <section id="contact" class="content">
    <h2>Contact Me</h2>
    <p>Email: catawan.aileen123@gmail.com</p>
    <p>Phone: 09534386541</p>
    <img src="ms.aileen.jpg" alt="Contact Me">
  </section>

  <section id="courses" class="content">
    <h2>My Courses</h2>

    <!-- Filters -->
    <div class="filters">
      <button onclick="setFilter('all')">All</button>
      <button onclick="setFilter('completed')">Completed</button>
      <button onclick="setFilter('pending')">Pending</button>
    </div>

    <!-- Search -->
    <input type="text" id="search-bar" placeholder="Search courses..." oninput="searchCourses()">

    <!-- Courses -->
    <div id="courses-list"></div>
  </section>
</main>

<footer>
  <p>&copy; 2025 Aileen Mae Cat-awan. All rights reserved.</p>
</footer>

<script>
let currentFilter = 'all';

function toggleSection(sectionId) {
  document.querySelectorAll('section.content').forEach(section => {
    section.style.display = section.id === sectionId ? 'block' : 'none';
  });
}

async function loadCourses() {
  const response = await fetch("https://missai16.github.io/my_portfolio/courses.json");
  const courses = await response.json();
  window.allCourses = courses.map(course => ({ ...course, completed: false }));
  displayCourses();
}

function displayCourses() {
  const list = document.getElementById("courses-list");
  const search = document.getElementById("search-bar").value.toLowerCase();
  list.innerHTML = "";

  const filtered = window.allCourses
    .filter(course => course.description.toLowerCase().includes(search))
    .filter(course => {
      if (currentFilter === 'completed') return course.completed;
      if (currentFilter === 'pending') return !course.completed;
      return true;
    });

  filtered.forEach((course, index) => {
    const completedClass = course.completed ? 'completed' : '';
    list.innerHTML += `
      <div class="course-item ${completedClass}" data-index="${index}">
        <h3 contenteditable="false">${course.code} - ${course.description}</h3>
        <p><strong>Year Level:</strong> <span contenteditable="false">${course.year_level}</span></p>
        <p><strong>Semester:</strong> <span contenteditable="false">${course.sem}</span></p>
        <p><strong>Credits:</strong> <span contenteditable="false">${course.credit}</span></p>
        <button onclick="editCourse(this)">Edit</button>
        <button onclick="toggleComplete(this)">${course.completed ? 'Unmark' : 'Mark as Completed'} âœ…</button>
      </div>
    `;
  });
}

function searchCourses() {
  displayCourses();
}

function setFilter(filter) {
  currentFilter = filter;
  displayCourses();
}

function editCourse(button) {
  const item = button.closest('.course-item');
  const isEditing = button.textContent === 'Save';
  const fields = item.querySelectorAll('[contenteditable]');

  if (isEditing) {
    fields.forEach(el => el.setAttribute('contenteditable', 'false'));
    button.textContent = 'Edit';
    const index = item.dataset.index;
    const [code, description] = item.querySelector('h3').innerText.split(' - ');
    window.allCourses[index] = {
      ...window.allCourses[index],
      code: code.trim(),
      description: description.trim(),
      year_level: item.querySelectorAll('span')[0].innerText.trim(),
      sem: item.querySelectorAll('span')[1].innerText.trim(),
      credit: item.querySelectorAll('span')[2].innerText.trim(),
    };
  } else {
    fields.forEach(el => el.setAttribute('contenteditable', 'true'));
    button.textContent = 'Save';
  }
}

function toggleComplete(button) {
  const index = button.closest('.course-item').dataset.index;
  window.allCourses[index].completed = !window.allCourses[index].completed;
  displayCourses();
}

// Dark Mode Toggle
function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
  localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
}

document.addEventListener('DOMContentLoaded', () => {
  loadCourses();
  if (localStorage.getItem('theme') === 'dark') {
    document.body.classList.add('dark-mode');
  }
});
</script>

</body>
</html>
